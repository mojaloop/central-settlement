version: "3.7"
services:
  central-settlement:
    build:
      dockerfile: test-integration.Dockerfile
      context: .
      cache_from: 
        - mojaloop/central-settlement
        - central-settlement:test
    container_name: cs_central-settlement
    links:
      - mysql
      - kafka
    ports:
      - "3007:3007"
    volumes:
      # - ./docker/central-ledger/default.json:/opt/central-ledger/config/default.json
      - ./test:/opt/central-settlement/test
      - ./src:/opt/central-settlement/src
    # environment:
    #   - CLEDG_DATABASE_URI=mysql://central_ledger:password@mysql:3306/central_ledger
    #   - CLEDG_SIDECAR__DISABLED=true
    command:
      - tail 
      - -f 
      - /dev/null